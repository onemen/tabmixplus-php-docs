<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title>Tab Mix Plus</title>
  <link rel="stylesheet" type="text/css" href="../styles/tabmix.css"/>
  <script type="text/javascript">
    function reqListener () {
      try {
        setVersion(this.responseXML.childNodes[0].innerHTML);
      } catch (ex) { console.info(ex)}
    }

    function setVersion(versions) {
      if (versions) {
        versions = versions.split(",");
        // when we have a version data, replace link to the history version with
        // the link of the latest dev-build xpi file
        var innerHTML = '<a href="https://addons.cdn.mozilla.net/storage/public-staging/1122/tab_mix_plus-#version-fx.xpi">Latest Development Build<\/a> #ver';
        var devbuild = document.getElementById("devbuild");
        document.getElementById("devbuild").innerHTML = innerHTML.replace(/#ver/g, versions[0]);
        document.getElementById("current").innerHTML += " " + versions[1];
      }
    }

    function onload(aEvent) {
      var win = aEvent.currentTarget;
/*
console.log("aEvent.currentTarget == window " + (aEvent.currentTarget== window)
+ "        aEvent.originalTarget == window " + (aEvent.originalTarget == window)
+ "        aEvent.target == window " + (aEvent.target == window)
);
*/
      win.removeEventListener("DOMContentLoaded", onload, false);
      try {
        var oReq = new XMLHttpRequest();
        oReq.onload = reqListener;
        oReq.open("get", "latest.xml", false);
        oReq.send();
      } catch (ex) { }

       var title = "", location = win.parent.location.href;
       if (location.indexOf("changelog") > -1)
         title = "Change Log";
       else if (location.indexOf("troubleshooting") > -1)
         title = "Troubleshooting";
       document.getElementById("subtitle").textContent = title;
/*
console.log("href " + win.location.href);
console.log("location.search " + win.location.search);
      var title = location.search.split("&")[1];
      if (title) {
        document.getElementById("subtitle").textContent = decodeURI(title.split("=")[1]);
      }
*/
    }
    window.addEventListener("DOMContentLoaded", onload, false);

  </script>
</head>
<body class="top">
  <div id="wrapheader">
    <div id="logodesc">
      <table cellspacing="0" width="100%">
        <tbody><tr>
          <td>
            <a href="../index.html"><img src="../styles/images/tabmix_logo.gif" alt="" title="" height="60" width="75"/></a>
          </td>
          <td width="100%" align="center">
            <h1>Tab Mix Plus</h1>
            <span id="subtitle" class="gen"></span>
          </td>
          <td>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="margin-top: 31px;" target="_top">
              <input type="hidden" name="cmd" value="_s-xclick"/>
              <input type="hidden" name="hosted_button_id" value="BZWMH5PS56GAW"/>
              <input title="Donate to Tab Mix Plus" type="image" class="radio" src="../styles/images/donate.gif" name="submit" alt="PayPal - The safer, easier way to pay online!"/>
              <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"/>
            </form>
          </td>
        </tr></tbody>
      </table>
    </div>
  </div>

  <div id="menubar">
    <table width="100%" cellspacing="0">
    <tr>
      <td class="gen top-menu" align="center">
        <a href="http://tmp.garyr.net/forum/index.php">Forum</a>
        <a href="http://tmp.garyr.net/help/index.html">Help</a>
        <a href="http://tmp.garyr.net/support/troubleshooting/index.html">Troubleshooting</a>
        <a href="http://tmp.garyr.net/support/changelog/index.html">Change Log</a>
        <a href="https://addons.mozilla.org/en-US/firefox/addon/tab-mix-plus/">Download</a>
      </td>
    </tr>
    </table>
  </div>

  <div id="top-tables">
    <div id="right-table">
      <div class="header" align="center">Downloads</div>
      <div class="inner-box">
        <p id="current"><a href="https://addons.mozilla.org/en-US/firefox/addon/tab-mix-plus/">Current Version</a></p>
        <p id="devbuild"><a href="https://addons.mozilla.org/en-us/firefox/addon/tab-mix-plus/versions/">Latest Development Build</a></p>
        <p><a href="http://tmp.garyr.net/dev-builds/">Older Development Builds</a></p>
        <p>You can download
          <a href="https://bitbucket.org/onemen/tabmixplus" style="color:blue">source code</a> or
          <a href="https://bitbucket.org/onemen/tabmixplus/downloads" style="color:blue">latest</a> working version at any time.
        </p>
      </div>
    </div>
  </div>

</body>
</html>